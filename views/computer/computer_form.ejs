<%- include('../partials/header.ejs') %>




<aside class="d-flex flex-column card card-body" style="align-items: center; margin:10px 0px">
  <div class="row">
    <div class="col-15">
      <img id="cpu_img" class="nav-link_computer" src="/static_images/cpu.png" onclick="handleImageClick(this)" style="width: 66px; height: 59px;">
    </div>
    <div class="col-15">
      <img id="mother_img" class="nav-link_computer" src="/static_images/mother.png" onclick="handleImageClick(this)" style="width: 66px; height: 59px;">
    </div>
    <div class="col-15">
      <img id="ram_img" class="nav-link_computer" src="/static_images/ram.png" onclick="handleImageClick(this)" style="width: 66px; height: 59px;">
    </div>
    
    <div class="col-15">
      <img id="gpu_img" class="nav-link_computer" src="/static_images/gpu.png" onclick="handleImageClick(this)" style="width: 66px; height: 59px;">
    </div>
    <div class="col-15">
      <img id="storage_img" class="nav-link_computer" src="/static_images/storage.png" onclick="handleImageClick(this)" style="width: 66px; height: 59px;">
    </div>
    <div class="col-15">
      <img id="powerSupply_img" class="nav-link_computer" src="/static_images/powerSupply.png" onclick="handleImageClick(this)" style="width: 66px; height: 59px;">
    </div>
    
    <div class="col-15">
      <img id="cabinet_img" class="nav-link_computer" src="/static_images/cabinet.png" onclick="handleImageClick(this)" style="width: 66px; height: 59px;">
    </div>
  </div>
</aside>

<div class="product-container" id="product-container"></div> 

<script>


  var selectedProducts = []
  var selectedRam = [];
  var selectedStorage = [];

  // This fragment of code detect the change in the product container content
  const productContainer = document.getElementById("product-container");

  const observer = new MutationObserver(function(mutations) {
    mutations.forEach(function(mutation) {
      if(mutation.addedNodes.length > 0) {
        // console.log(mutation);
        for(product of selectedProducts) {
          
          
          let selectedProduct = document.getElementById(product)
          if(selectedProduct != null) {
            console.log(selectedProduct)
            if(selectedProduct.classList.contains('brand-img')){
              selectedProduct.classList.add("selected-brand");
              
            }
            
            else {
              selectedProduct.classList.add("selected-product");
            }

            if(selectedProduct.classList.contains('ram')){
              let stock = document.getElementById(`stock-${product}`)

            if(stock != null){
              console.log("NO SOY UNDEFINED")
              console.log(stock)
              // const productCount = selectedRam.filter(item => item === product).length;
              // console.log(productCount)
              const productCount = selectedRam.filter(item => item === product).length;
              console.log(productCount)
              
              
              stock.innerHTML = `
              <div class="input-group mb-3">
              <div class="input-group-prepend">
                <button class="btn btn-outline-secondary minus-btn" onclick="deleteProduct('${product}', 'ram', event);" type="button">-</button>
              </div>
              <span class="form-control quantity-text">${productCount}</span>
              <div class="input-group-append">
                <button class="btn btn-outline-secondary plus-btn" type="button">+</button>
              </div>
            </div>
              `
            }
            }
            

          }
          
        };


        }
      })
      
    });

  observer.observe(productContainer, {
    childList: true,
    
  });







function handleImageClick(img) {

  // Manejamos el cambio de las imágenes
  let src = img.src.split('.');
  
  if (src[0].includes("static_images")){
    let newSrc = src[0].endsWith('-active') ? src[0].slice(0, -7) + '.' + src[1] : src[0] + '-active.' + src[1];
  let baseURL = window.location.origin;
  src[0] = src[0].replace(baseURL, '');
  newSrc = newSrc.replace(baseURL, '');

  

  let images = document.querySelectorAll('.nav-link_computer');
  for (let image of images) {
    let currSrc = image.src.split('.');
    currSrc[0] = currSrc[0].replace(baseURL, '');
    if (currSrc[0].endsWith('-active')) {
      currSrc[0] = currSrc[0].slice(0, -7);
      image.src = baseURL + currSrc[0] + '.' + currSrc[1];
      image.classList.remove("active");
    }
  }
  img.src = baseURL + newSrc;
  }
  
  img.classList.add("active");
  let activeImage = document.getElementsByClassName('active')
    console.log(activeImage.length)
  if(activeImage.length > 2){
    
    console.log(activeImage)
  }






  // Aquí es cuando mostramos todos los productos
  let productContainer = document.querySelector('.product-container');
  productContainer.innerHTML = '';
  switch(img.id) {
    case 'storage_img':
    productContainer.innerHTML += `
      <div class="row">
      <% for (storage of storages) { %>
        <div class="col-md-3 mb-3">
          <div class="card  product storage  h-100" id="<%= storage._id %>" onclick="selectProduct(<%= JSON.stringify(storage) %>, 'storage');">

            <img src="<%=  typeof storage.toObject().image !== 'undefined' ? '/images/' + storage.image : 'https://via.placeholder.com/300x200' %>" class="card-img-top" alt="<%= storage.name%>">
            <div class="card-body">
              <h5 class="card-title"> <a href="<%= storage.url %>"><%= storage.name %></a>  </h5> 
              <p class="card-text">
                <% for (var j = 0; j < storage.brand.length; j++) { %>
                  <%= storage.brand[j].name %>
                <% } %> -
                <span class="badge badge-primary badge-pill"> <%= storage.type %> </span> <br>
                <span class="badge badge-success badge-pill">
                  <%= "$" + storage.price.toLocaleString() + " ARS"%>
                </span>
              </p>
            </div>
          </div>
        </div>
    <% } %>
    </div>`;
      break;
    
    case 'ram_img':
    productContainer.innerHTML += `
      <div class="row">
      <% for (ram of rams) { %>
        <div class="col-md-3 mb-3">
          <div class="card  product ram h-100" id="<%= ram._id %>" onclick="selectProduct(<%= JSON.stringify(ram) %>, 'ram');">

            <img src="<%=  typeof ram.toObject().image !== 'undefined' ? '/images/' + ram.image : 'https://via.placeholder.com/300x200' %>" class="card-img-top" alt="<%= ram.name%>">
            <div class="card-body">
              <h5 class="card-title"> <a href="<%= ram.url %>"><%= ram.name %></a>  </h5> 
              <p class="card-text">
                <% for (var j = 0; j < ram.brand.length; j++) { %>
                  <%= ram.brand[j].name %>
                <% } %> -
                <span class="badge badge-primary badge-pill"> <%= ram.type %> </span> 
                <span class="badge badge-success badge-pill">
                  <%= "$" + ram.price.toLocaleString() + " ARS"%>
                  
                </span> 
                
                <div id="stock-<%= ram._id %>"></div>
                
                
              </p>
            </div>
          </div>
        </div>
    <% } %>
    </div>`;
      break;
    case 'cpu_img': 





    productContainer.innerHTML += `
      <% for (brand of brands){%>
      <div class="row">
        <% if(brand.name.toLowerCase() == "intel"){%>
        <div class="col-md-3 card brand-img" id="<%= brand._id%>" 
          onclick="selectProduct( <%= JSON.stringify(brand) %>, 'brand');">
          <img alt="Intel" id="<%= brand._id%>" src="/static_images/intel.png">
        </div>
        <% } %>
        <% if(brand.name.toLowerCase() == "amd"){%>
        <div class="col-md-3 card brand-img" id="<%= brand._id%>"
          onclick="selectProduct( <%= JSON.stringify(brand) %>, 'brand');">
          <img alt="amd"  src="/static_images/amd.png"> 
        </div>
        <% } %>
      </div>

      <% } %>
      <div class="row">
      <% for (cpu of cpus) { %>
        <div class="col-md-3 mb-3 " >
          <div class="card h-100 product" id="<%= cpu._id %>" onclick="selectProduct(<%= JSON.stringify(cpu) %>, 'cpu');">

            <img src="<%=  typeof cpu.toObject().image !== 'undefined' ? '/images/' + cpu.image : 'https://via.placeholder.com/300x200' %>" class="card-img-top" alt="<%= cpu.name%>">
            <div class="card-body">
              <h5 class="card-title"> <a href="<%= cpu.url %>"><%= cpu.name %></a>  </h5> 
              <p class="card-text">
                  <%= cpu.core_count %> cores <br>
                  <%= cpu.thread_count %> threads<br>
                <span class="badge badge-success badge-pill">
                  <%= "$" + cpu.price.toLocaleString() + " ARS"%>
                </span>
              </p>
            </div>
          </div>
        </div>
    <% } %>
    </div>`;
      break;
    case 'gpu_img':
    productContainer.innerHTML += `
      <div class="row">
      <% for (gpu of gpus) { %>
        <div class="col-md-3 mb-3">
          <div class="card  h-100 product" id="<%= gpu._id %>" onclick="selectProduct(<%= JSON.stringify(gpu) %>, 'gpu');">

            <img src="<%=  typeof gpu.toObject().image !== 'undefined' ? '/images/' + gpu.image : 'https://via.placeholder.com/300x200' %>" class="card-img-top" alt="<%= gpu.name%>">
            <div class="card-body">
              <h5 class="card-title"> <a href="<%= gpu.url %>"><%= gpu.name %></a>  </h5> 
              <p class="card-text">
                <% for (var j = 0; j < gpu.brand.length; j++) { %>
                  <%= gpu.brand[j].name %>
                <% } %> -
                Core clock: <%= gpu.core_clock %> <br>
                  Memory: <%= gpu.memory %><br>
                  <%= "$" + gpu.price.toLocaleString() + " ARS"%>
                </span>
              </p>
            </div>
          </div>
        </div>
    <% } %>
    </div>`;
      break;
    case 'powerSupply_img':
    productContainer.innerHTML += `
      <div class="row">
      <% for (powerSupply of powerSupplies) { %>
        <div class="col-md-3 mb-3">
          <div class="card  h-100 product" id="<%= powerSupply._id %>" onclick="selectProduct(<%= JSON.stringify(powerSupply) %>, 'powerSupply');">

            <img src="<%=  typeof powerSupply.toObject().image !== 'undefined' ? '/images/' + powerSupply.image : 'https://via.placeholder.com/300x200' %>" class="card-img-top" alt="<%= powerSupply.name%>">
            <div class="card-body">
              <h5 class="card-title"> <a href="<%= powerSupply.url %>"><%= powerSupply.name %></a>  </h5> 
              <p class="card-text">
                <% for (var j = 0; j < powerSupply.brand.length; j++) { %>
                  <%= powerSupply.brand[j].name %>
                <% } %> -
                <%= powerSupply.certifications %> <br>
                <%= powerSupply.power %> W <br>
                <span class="badge badge-success badge-pill">
                  <%= "$" + powerSupply.price.toLocaleString() + " ARS"%>
                </span>
              </p>
            </div>
          </div>
        </div>
    <% } %>
    </div>`;
      break;
    case 'mother_img':
        productContainer.innerHTML += `
      <div class="row">
      <% for (motherboard of motherboards) { %>
      
        <div class="col-md-3 mb-3">
          <div class="card h-100 product" id="<%= motherboard._id %>" onclick="selectProduct( <%= JSON.stringify(motherboard) %>, 'motherboard');">

            <img src="<%=  typeof motherboard.toObject().image !== 'undefined' ? '/images/' + motherboard.image : 'https://via.placeholder.com/300x200' %>" class="card-img-top" alt="<%= motherboard.name%>">
            <div class="card-body">
              <h5 class="card-title"> <a href="<%= motherboard.url %>"><%= motherboard.name %></a>  </h5> 
              <p class="card-text">
                <% for (var j = 0; j < motherboard.brand.length; j++) { %>
                  <%= motherboard.brand[j].name %>
                <% } %> -
                <span class="badge badge-primary badge-pill"> <%= motherboard.type %> </span> <br>
                <span class="badge badge-success badge-pill">
                  <%= "$" + motherboard.price.toLocaleString() + " ARS"%>
                </span>
              </p>
            </div>
          </div>
        </div>
    <% } %>
    </div>`;
      break;
    case 'cabinet_img':
      productContainer.innerHTML += `
      <div class="row">
      <% for (cabinet of cabinets) { %>
        
        <div class="col-md-3 mb-3">
          <div class="card h-100 product" id="<%= cabinet._id %>" onclick="selectProduct(<%= JSON.stringify(cabinet) %>, 'cabinet');" >

            <img 
            src="<%=  typeof cabinet.toObject().image !== 'undefined' ? '/images/' + cabinet.image : 'https://via.placeholder.com/300x200' %>" 
            class="card-img-top" alt="<%= cabinet.name%>"  >
            <div class="card-body" >
              <h5 class="card-title"> <a href="<%= cabinet.url %>"><%= cabinet.name %></a>  </h5> 
              <p class="card-text" >
                <% for (var j = 0; j < cabinet.brand.length; j++) { %>
                  <%= cabinet.brand[j].name %>
                <% } %> -
                <span class="badge badge-primary badge-pill"> <%= cabinet.type %> </span> <br>
                <span class="badge badge-success badge-pill" >
                  <%= "$" + cabinet.price.toLocaleString() + " ARS"%>
                </span>
              </p>
            </div>
          </div>
        </div>
    <% } %>
    </div>`;
      break;
    }
  }



   // Aquí manejamos el agregar los productos 
  var socket_v2, socket_sata, maxRamSlot, maxStorageSlot;
  maxRamSlot = 2;
  socket_v2 = 1;
  socket_sata = 4;
  maxStorageSlot = 5;



  function selectProduct(product, type) {

    
    if (type == 'motherboard') {
      if(product.ram_slots < selectedRam.length) {
        console.log('Insuficientes ram slots ')
        return;
      }
      socket_v2 = product.sockets_v2;
      socket_sata = product.sockets_sata;
      maxStorageSlot = socket_sata + socket_v2;
      console.log(maxStorageSlot)
      maxRamSlot = product.ram_slots;
      console.log(product)

      let img = document.getElementById(`mother_img`)


    let selectedProduct = document.getElementById(product._id);
    let currentSelection = document.getElementsByClassName("selected-product");
    if (currentSelection.length > 0) {
      selectedProducts = selectedProducts.filter(item => item != currentSelection[0].id);
      currentSelection[0].classList.remove("selected-product");
    }

    if(selectedProduct.classList.contains("selected-product") || selectedProducts.includes(product._id)) {
      console.log(selectedProduct)
      selectedProduct.classList.remove("selected-product");
      img.src = `/static_images/mother-active.png`
      selectedProducts = selectedProducts.filter(item => item !== product._id);
      console.log(selectedProducts)
      console.log("se borró la clase ")
      document.getElementById(type).value = ''
    } else if (!selectedProduct.classList.contains("selected-product")) {
        selectedProduct.classList.add("selected-product");
        
        img.src = selectedProduct.children[0].src
        console.log("se creo la clase")
        selectedProducts.push(product._id)
        document.getElementById(type).value = product._id;
    }

      
      return;
    }





    if (type == 'ram') {
      if (selectedRam.length < maxRamSlot) {
        selectedRam.push(product._id);
        console.log(`RAM seleccionada: ${product._id}`);
        
        document.getElementById('rams').value = selectedRam.join(',');
        console.log(selectedRam)

        
        const productCount = selectedRam.filter(item => item === product._id).length;
        console.log(productCount)
        let stock= document.getElementById(`stock-${product._id}`) 
        console.log(stock)
        
        stock.innerHTML = `
        <div class="input-group mb-3">
        <div class="input-group-prepend">
          <button class="btn btn-outline-secondary minus-btn" onclick="deleteProduct('${product._id}', 'ram', event);" type="button">-</button>
        </div>
        <span class="form-control quantity-text">${productCount}</span>
        <div class="input-group-append">
          <button class="btn btn-outline-secondary plus-btn" type="button">+</button>
        </div>
      </div>
        `


        let selectedProduct = document.getElementById(product._id);
        let currentSelection = document.getElementsByClassName('selected-product');

        
          console.log(currentSelection)
        // // Añade a los objetos seleccionados al objeto en cuestion, para que al actualizarse 
        // // el contenedor, este siga seleccionado.
        
      
        // console.log(selectedProduct)
        // Si ya hay un producto seleccionado, quitar la clase de resaltado
        if (currentSelection.length > 1) {
          selectedProducts = selectedProducts.filter(item => item != currentSelection[0].id);
          currentSelection[0].classList.remove("selected-product");
        }
        let img = document.getElementById(`${type}_img`)

        if (!selectedProduct.classList.contains("selected-product")) {
            selectedProduct.classList.add("selected-product");
            selectedProducts.push(product._id)
        }
            img.src = selectedProduct.children[0].src
            console.log("se creo la clase")
            
            document.getElementById('rams').value = selectedRam;
       








            
          } else {
            alert('Has alcanzado el máximo de slots de RAM');
          }
          return;
        }

    








      if(type == 'storage') {
        console.log(selectedStorage.length)
        console.log(maxStorageSlot)
        console.log(socket_sata)
        console.log(socket_v2)
        
        if (selectedStorage.length < maxStorageSlot){
          // Conver the product in a object
   

          if(product.type == "HDD" || product.type == "SSD" || product.type == "SSHD"){
            let StorageSATA = selectedStorage.filter(obj => obj.type === "HDD" 
            || obj.type === "SSD" || obj.type === "SSHD") ;
            if(StorageSATA.length  > socket_sata){
              console.log('Has alcanzado el máximo de slots SATA');
              return;
            }
            selectedStorage.push(product)
            console.log('SATA añadido correctamente')
          }
          if(product.type == "NVMe"){
            let StorageV2 = selectedStorage.filter(obj => obj.type === "NVMe");
            if(StorageV2.length >= socket_v2){
              console.log('Has alcanzado el máximo de slots NVMe');
              return;
            }
            selectedStorage.push(product)
            console.log('NVMe añadido correctamente')
          }


          let resultStorage = selectedStorage.map(obj => obj._id);
          console.log(`Storages seleccionadas: ${resultStorage}`)
          document.getElementById('storages').value = resultStorage.join(',');
          return;
        } else {
          console.log('Haz alcanzado el límite de almacenamiento')
          return;
        }
        
      }


      if(type == "brand"){
        console.log('se ejecuto el select del brand' + product.name)
        let selectedProduct = document.getElementById(product._id);
        let currentSelection = document.getElementsByClassName("selected-brand");
        if (currentSelection.length > 0) {
          selectedProducts = selectedProducts.filter(item => item != currentSelection[0].id);
          currentSelection[0].classList.remove("selected-brand");
        }

          if(selectedProduct.classList.contains("selected-brand") || selectedProducts.includes(product._id)) {
            console.log(selectedProduct)
            selectedProduct.classList.remove("selected-brand");
            selectedProducts = selectedProducts.filter(item => item != product._id);
            console.log(selectedProducts)
            console.log("se borró la clase ")
            document.getElementById(type).value = ''
          } else if (!selectedProduct.classList.contains("selected-brand")) {
              selectedProduct.classList.add("selected-brand");
              
              
              console.log("se creo la clase")
              selectedProducts.push(product._id)
              document.getElementById(type).value = product._id;
          }
        return;
      }

      //objeto

      // console.log(product)
      


    let selectedProduct = document.getElementById(product._id);
    let currentSelection = document.getElementsByClassName("selected-product");

    
      console.log(currentSelection)
    // // Añade a los objetos seleccionados al objeto en cuestion, para que al actualizarse 
    // // el contenedor, este siga seleccionado.
    
  
    // console.log(selectedProduct)
    // Si ya hay un producto seleccionado, quitar la clase de resaltado
    if (currentSelection.length > 0) {
      selectedProducts = selectedProducts.filter(item => item != currentSelection[0].id);
      currentSelection[0].classList.remove("selected-product");
    }
    let img = document.getElementById(`${type}_img`)

    if(selectedProduct.classList.contains("selected-product") || selectedProducts.includes(product._id)) {
      console.log(selectedProduct)
      selectedProduct.classList.remove("selected-product");
      img.src = `/static_images/${type}-active.png`
      selectedProducts = selectedProducts.filter(item => item !== product._id);
      console.log(selectedProducts)
      console.log("se borró la clase ")
      document.getElementById(type).value = ''
    } else if (!selectedProduct.classList.contains("selected-product")) {
        selectedProduct.classList.add("selected-product");
        
        img.src = selectedProduct.children[0].src
        console.log("se creo la clase")
        selectedProducts.push(product._id)
        document.getElementById(type).value = product._id;
    }

    
    
    
    
    // console.log(selectedProduct)
    
    console.log("se ejecutó select product");
  }



  // maxRamSlot = 2;
  // socket_v2 = 1;
  // socket_sata = 4;
  // maxStorageSlot = 5;

  // var selectedRam = [];
  // var selectedStorage = [];


  function deleteProduct(product, type, event){
  //  if(type == "ram"){
  //   console.log("Selected RAM PRE TODO: " +selectedRam)
  //     const ramToRemove = selectedRam.indexOf(product._id);
  //   if (ramToRemove !== -1) {
  //     selectedRam.splice(ramToRemove, 1);
  //   }
  //   console.log("Selected RAM POST TODO: " + selectedRam)
  //  }

   let selectedProduct = document.getElementById(product);
   let img = document.getElementById(`${type}_img`)
   console.log("esta es la imagen" + img.src)

  
   if(type == "ram"){
    
    console.log("Selected RAM PRE TODO: " +selectedRam)
    const ramToRemove = selectedRam.indexOf(product);
    selectedRam.splice(ramToRemove, 1);
    
    console.log("Selected RAM POST TODO: " + selectedRam)
    const productCount = selectedRam.filter(item => item === product).length;
    let stock= document.getElementById(`stock-${product}`) 
    console.log("stock: " + stock)
   console.log("product count: " + productCount)
   console.log(typeof productCount)
    if(productCount == 0){
      stock.innerHTML = ``
    } else{
      stock.innerHTML = `
        <div class="input-group mb-3">
        <div class="input-group-prepend">
          <button class="btn btn-outline-secondary minus-btn" onclick="deleteProduct('${product}', 'ram', event);" type="button">-</button>
        </div>
        <span class="form-control quantity-text">${productCount}</span>
        <div class="input-group-append">
          <button class="btn btn-outline-secondary plus-btn" type="button">+</button>
        </div>
      </div>
        `
    }
    
    if(!selectedRam.includes(product) || productCount == 0){
      console.log("el productiñio es ")
      console.log(selectedProduct)
      selectedProduct.classList.remove("selected-product");
      console.log(selectedProduct)
      let currentSelection = document.getElementsByClassName("selected-product");
      selectedProducts = selectedProducts.filter(item => item !== product);
      if (currentSelection.length == 0 ){
        img.src = `/static_images/${type}-active.png`
      }
      
      
   
        
        }
        document.getElementById('rams').value = selectedRam;
    event.stopPropagation()
    return;
   }
   
    console.log('se ejecuto delete')
    event.stopPropagation()
  }


</script>





<form action="" method="post" enctype="multipart/form-data">
    <div class="form-group">
        <label for="name">Name</label>
        <input type="text" class="form-control" name="name" id="name" value="<%= (typeof computer === 'undefined' ? '' : computer.name) %>" required>
    </div>
    <div class="form-group">
        <label for="description">Description (opcional)</label>
            <textarea name="description" id="description" class="form-control" row="3" placeholder="Write you description"></textarea>
    </div>
    <div class="form-group">
        <label for="image">Image</label>
        <p class="alert-danger">For the moment, you can have only one image for product. In the future, this functionality will be expanded</p>
        <input type="file" multiple name="image" required id="image"  class="form-control" >
    </div>

    <div class="form-group">
        <label for="brand">Brand</label>
       
      <input name="brand" id="brand" required>
    </div>


    <div class="form-group">
      <label for="cabinet">Cabinet</label>
      <input name="cabinet" id="cabinet" required>
    </div>


    <div class="form-group">
      <label for="cpu">CPU</label>
      <input name="cpu" id="cpu" required>
    </div>


    <div class="form-group">
      <label for="gpu">GPU</label>
      <input name="gpu" id="gpu" required>
    </div>


    <div class="form-group">
      <label for="motherboard">Motherboard</label>
      <input name="motherboard" id="motherboard" required>
    </div>

      <div class="form-group">
        <label for="powerSupply">Power Supply</label>
        <input name="powerSupply" id="powerSupply" required>
      </div>

      <div><br>
        
        <label for="rams">Rams</label>
        <input name="rams" id="rams" required multiple>
      </div>

      <div>
        <label for="storages">Storages</label> 
        <input name="storages" id="storages" required multiple>
        
      </div>
      
    


    
    <button type="submit" class="btn btn-primary">Submit</button>
    </form><br>

<% if(typeof errors !== 'undefined'){ %>
    <% errors.forEach(function(error) { %>
        <div class="alert alert-danger">
            <%= error.msg %>
        </div>
    <% }); %>
<% } %>
<% if(typeof errors_compatibility !== 'undefined'){ %>
    <% for (let error of errors_compatibility) { %>
        <div class="alert alert-danger">
            <%= error %>
        </div>
    <% }; %>
<% } %>

</div>
</div>
</div>

<%- include('../partials/footer.ejs') %>