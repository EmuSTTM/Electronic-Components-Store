<%- include('../partials/header.ejs') %>


<form action="" method="post" enctype="multipart/form-data">
    <div class="form-group">
        <label for="name">Name</label>
        <input type="text" class="form-control" name="name" id="name" value="<%= (typeof computer === 'undefined' ? '' : computer.name) %>" required>
    </div>
    <div class="form-group">
        <label for="description">Description (opcional)</label>
            <textarea name="description" id="description" class="form-control" row="3" placeholder="Write you description"></textarea>
    </div>
    <div class="form-group">
        <label for="image">Image</label>
        <p class="alert-danger">For the moment, you can have only one image for product. In the future, this functionality will be expanded</p>
        <input type="file" multiple name="image" required id="image"  class="form-control" >
    </div>

    <div class="form-group">
        <label for="brand">Brand</label>
        <select class="form-control" name="brand" id="brand" required>
            <% for (let brand of brands) { %>   
                <option name="brand" id="<%= brand._id %>" value="<%= brand._id %>" %>" <%= typeof brand.checked != "undefined" && brand.checked ? 'checked' : '' %>> <%= brand.name %> </option> 
            <% } %>   
        </select>
    </div>
    <div class="form-group">
        <label for="cabinet">Cabinet</label>
        <select class="form-control" name="cabinet" id="cabinet" required>
          <% for (let cabinet of cabinets) { %>   
            <option  id="<%= cabinet._id %>" value="<%= cabinet._id %>" <%= (typeof computer !== 'undefined' && cabinet.name === computer.cabinet.name) ? 'selected' : '' %>><%= cabinet.name %></option>
          <% } %>   
        </select>
        <ul>
            <% for (let cabinet of cabinets) { %>
                <li><a target="_blank" href="<%= cabinet.url %>" class="cabinet-link"><%= cabinet.name %></a></li>
              <% } %>
        </ul>
        
      </div>
      <div class="form-group">
        <label for="cpu">CPU</label>
        <select class="form-control" name="cpu" id="cpu" required>
          <% for (let cpu of cpus) { %>   
            <option  id="<%= cpu._id %>" value="<%= cpu._id %>" <%= (typeof computer !== 'undefined' && cpu.name === computer.cpu.name) ? 'selected' : '' %>><%= cpu.name %></option>
          <% } %>   
        </select>
        <ul>
            <% for (let cpu of cpus) { %>
                <li><a target="_blank" href="<%= cpu.url %>" class="cpu-link"><%= cpu.name %></a></li>
              <% } %>
        </ul>
        
      </div>
      <div class="form-group">
        <label for="gpu">GPU</label>
        <select class="form-control" name="gpu" id="gpu" required>
          <% for (let gpu of gpus) { %>   
            <option  id="<%= gpu._id %>" value="<%= gpu._id %>" <%= (typeof computer !== 'undefined' && gpu.name === computer.gpu.name) ? 'selected' : '' %>><%= gpu.name %></option>
          <% } %>   
        </select>
        <ul>
            <% for (let gpu of gpus) { %>
                <li><a target="_blank" href="<%= gpu.url %>" class="gpu-link"><%= gpu.name %></a></li>
              <% } %>
        </ul>
        
      </div>
      <div class="form-group">
        <label for="motherboard">Motherboard</label>
        <select class="form-control" name="motherboard" id="motherboard" required>
          <% for (let motherboard of motherboards) { %>   
            <option id="<%= motherboard._id %>" value="<%= motherboard._id %>" <%= (typeof computer !== 'undefined' && motherboard.name === computer.motherboard.name) ? 'selected' : '' %>><%= motherboard.name %></option>
          <% } %>   
        </select>
        <ul>
            <% for (let motherboard of motherboards) { %>
                <li><a target="_blank" href="<%= motherboard.url %>" class="motherboard-link"><%= motherboard.name %></a></li>
              <% } %>
        </ul>
      </div>

      <div class="form-group">
        <label for="powerSupply">Power Supply</label>
        <select class="form-control" name="powerSupply" id="powerSupply" required>
          <% for (let powerSupply of powerSupplies) { %>   
            <option  id="<%= powerSupply._id %>" value="<%= powerSupply._id %>" <%= (typeof computer !== 'undefined' && powerSupply.name === computer.powerSupply.name) ? 'selected' : '' %>><%= powerSupply.name %></option>
          <% } %>   
        </select>
        <ul>
            <% for (let powerSupply of powerSupplies) { %>
                <li><a target="_blank" href="<%= powerSupply.url %>" class="powerSupply-link"><%= powerSupply.name %></a></li>
              <% } %>
        </ul>
      </div>

      <div><br>
        <label for="rams">Rams</label> <br>
        <% for (let ram of rams) { %>
            <input type="checkbox" name="rams" id="<%= ram._id %>" value="<%= ram._id %>" %>" <%= ram.checked ? 'checked' : '' %>>
            <label for="<%= ram._id %>"> <%= ram.name %> </label> <br>
        <% } %>
      </div>

      <div><br>
        <label for="storages">Storages</label> <br>
        <% for (let storage of storages) { %>
            <input type="checkbox" name="storages" id="<%= storage._id %>" value="<%= storage._id %>" %>" <%= storage.checked ? 'checked' : '' %>>
            <label for="<%= storage._id %>"> <%= storage.name %> </label> <br>
        <% } %>
      </div>
      
    


    
    <button type="submit" class="btn btn-primary">Submit</button>
    </form><br>

<% if(typeof errors !== 'undefined'){ %>
    <% errors.forEach(function(error) { %>
        <div class="alert alert-danger">
            <%= error.msg %>
        </div>
    <% }); %>
<% } %>
<% if(typeof errors_compatibility !== 'undefined'){ %>
    <% for (let error of errors_compatibility) { %>
        <div class="alert alert-danger">
            <%= error %>
        </div>
    <% }; %>
<% } %>

</div>
</div>
</div>

<%- include('../partials/footer.ejs') %>
